<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 100 API & Postman Interview Questions</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', // Custom dark shade for cards
                            900: '#0f172a',
                            950: '#020617',
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Markdown Parser (marked) for AI responses -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Markdown Styles for AI Response */
        .prose p { margin-bottom: 0.5em; }
        .prose pre { padding: 0.75rem; border-radius: 0.5rem; overflow-x: auto; margin-top: 0.5rem; margin-bottom: 0.5rem; font-size: 0.875rem; }
        .prose code { padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-size: 0.875em; }
        .prose pre code { background: transparent; padding: 0; }
        .prose ul { list-style-type: disc; padding-left: 1.25rem; margin-bottom: 0.5rem; }
        .prose ol { list-style-type: decimal; padding-left: 1.25rem; margin-bottom: 0.5rem; }
        
        /* Light/Dark specific markdown overrides handled by prose-invert class in tailwind */
    </style>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect, useRef } = React;

        // --- ICONS ---
        const IconSearch = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>;
        const IconChevronDown = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /></svg>;
        const IconChevronUp = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" /></svg>;
        const IconCopy = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>;
        const IconCheck = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>;
        const IconFilter = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" /></svg>;
        const IconSparkles = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>;
        const IconCode = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>;
        const IconBulb = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>;
        const IconSettings = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;
        const IconClose = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>;
        const IconMoon = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>;
        const IconSun = ({ className }) => <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>;

        // --- DATA ---
        const QUESTIONS_DATA = [
            // PART 1: FUNDAMENTALS (1-15)
            { id: 1, q: "What is an API (Application Programming Interface)?", a: "An API is a software intermediary that allows two different applications to talk to each other. It defines the rules, protocols, and tools for building software and applications.", e: "Think of an API like a waiter in a restaurant. You (the client) look at the menu and give your order to the waiter. The waiter takes your order to the kitchen (the server) where the food is prepared. The waiter then brings the food back to you. You didn't need to know how the stove works or talk to the chef directly; the waiter handled that interface for you.", t: "Concepts", c: "Beginner" },
            { id: 2, q: "What is the difference between REST and SOAP?", a: "REST (Representational State Transfer) is an architectural style that is flexible, stateless, and typically uses HTTP and JSON. SOAP (Simple Object Access Protocol) is a protocol that is stricter, relies on XML, and has built-in security standards.", e: "Imagine REST as a casual, flexible conversation using simple postcards (JSON) where you can write whatever fits. SOAP is like sending a formal legal document via certified mail (XML) in a specific envelope; it's heavier and has more rules, but it guarantees the message arrives exactly as intended.", t: "Concepts", c: "Beginner" },
            { id: 3, q: "What are the common HTTP Methods and what do they do?", a: "HTTP methods are verbs that tell the server what action to perform. GET retrieves data, POST creates new data, PUT updates existing data completely, PATCH updates data partially, and DELETE removes data.", e: "Think of managing a file cabinet. GET is reading a file. POST is adding a new file. PUT is replacing a file with a new version. PATCH is correcting a typo in a file. DELETE is shredding the file.", t: "HTTP", c: "Beginner" },
            { id: 4, q: "What is the difference between PUT and PATCH methods?", a: "PUT is used to replace an entire resource (update all fields). PATCH is used to apply partial modifications to a resource (update specific fields only).", e: "If you have a user profile with Name, Age, and Email: sending a PUT request with just 'Age: 26' might delete the Name and Email because it replaces the whole record. A PATCH request with 'Age: 26' will only update the Age and leave the Name and Email alone.", t: "HTTP", c: "Intermediate" },
            { id: 5, q: "What is the difference between Path Parameters and Query Parameters?", a: "Path parameters are used to identify a specific resource or page, while Query parameters are used to sort, filter, or paginate those resources. Path params are part of the URL structure, whereas Query params come after a question mark.", e: "Think of a library. The Path Parameter is the specific aisle and shelf number to find a book (e.g., /books/harry-potter). The Query Parameter is like asking the librarian to show you only the 'hardcover' versions (e.g., /books/harry-potter?type=hardcover). The book is the same, but you are filtering the results.", t: "HTTP", c: "Beginner" },
            { id: 6, q: "What is a Payload in an API request?", a: "The payload is the actual data sent in the body of an HTTP request (like POST, PUT, or PATCH) to convey information to the server.", e: "If an API request is a delivery truck, the URL is the destination address, the headers are the shipping label, and the Payload is the actual package inside the truck that you want delivered.", t: "Concepts", c: "Beginner" },
            { id: 7, q: "What does 'Idempotency' mean in the context of APIs?", a: "Idempotency means that making the same API request multiple times produces the same result as making it just once.", e: "The DELETE method is idempotent: if you delete a photo once, it's gone. If you try to delete it 10 more times, the result is the same (it's still gone). The POST method is NOT idempotent: if you send a 'Create User' request 10 times, you will end up with 10 distinct users.", t: "Concepts", c: "Intermediate" },
            { id: 8, q: "What is the difference between URI and URL?", a: "URI (Uniform Resource Identifier) is a string that identifies a resource. URL (Uniform Resource Locator) is a type of URI that also describes how to access that resource (its location).", e: "Your name 'John Doe' is a URI (it identifies you). Your home address is a URL (it identifies you AND tells people how to find you). All URLs are URIs, but not all URIs are URLs.", t: "Concepts", c: "Beginner" },
            { id: 9, q: "What is a Resource in REST API?", a: "A Resource is any information or data object (like a User, Product, or Image) that can be named and manipulated by the API, typically represented as JSON.", e: "In a REST API, everything is a noun. If you are building a store, 'Customer', 'Order', and 'Product' are all Resources. They are accessed via URLs like /customers or /products.", t: "Concepts", c: "Beginner" },
            { id: 10, q: "What is JSON (JavaScript Object Notation)?", a: "JSON is a lightweight, text-based data format used for exchanging data between a server and a client. It is easy for humans to read and for machines to parse.", e: "JSON organizes data into simple key-value pairs, like a contact card: { 'name': 'John', 'age': 30 }. It has largely replaced XML because it is cleaner and uses less bandwidth.", t: "Concepts", c: "Beginner" },
            { id: 11, q: "What is XML (Extensible Markup Language)?", a: "XML is a markup language similar to HTML but designed to store and transport data. It uses tags to define elements.", e: "XML looks like this: <name>John</name>. It is more verbose and stricter than JSON, which makes it good for complex documents but heavier for simple mobile apps.", t: "Concepts", c: "Beginner" },
            { id: 12, q: "What does HTTP Status Code 200 mean?", a: "Status 200 means 'OK'. It indicates that the request was successful and the server has returned the requested data.", e: "It's the standard 'Thumbs Up' from the server. Everything went exactly as planned.", t: "HTTP Status", c: "Beginner" },
            { id: 13, q: "What does HTTP Status Code 201 mean?", a: "Status 201 means 'Created'. It indicates that the request was successful and a new resource has been created on the server.", e: "You typically see this after a successful POST request, like signing up a new user. The server says, 'Success! I have built the thing you asked for.'", t: "HTTP Status", c: "Beginner" },
            { id: 14, q: "What does HTTP Status Code 204 mean?", a: "Status 204 means 'No Content'. The request was successful, but there is no data to return in the body.", e: "This is common for DELETE requests. If you delete a user, the server says 'Done (204)', implying 'I did it, but I have nothing to show you because it's gone.'", t: "HTTP Status", c: "Beginner" },
            { id: 15, q: "What does HTTP Status Code 400 mean?", a: "Status 400 means 'Bad Request'. It means the client sent data that the server could not understand, often due to invalid syntax or missing required fields.", e: "It's like filling out a form but forgetting to write your name. The clerk (server) hands it back and says, 'I can't process this until you fix the errors.'", t: "HTTP Status", c: "Beginner" },

            // PART 2: STATUS CODES (16-25)
            { id: 16, q: "What are the five categories of HTTP Status Codes?", a: "1xx: Informational (Request received), 2xx: Success (Request accepted), 3xx: Redirection (Further action needed), 4xx: Client Error (You messed up), 5xx: Server Error (I messed up).", e: "Just remember the first digit: 2 is Good, 4 is Your Fault, 5 is the Server's Fault.", t: "HTTP Status", c: "Beginner" },
            { id: 17, q: "What is the difference between 401 Unauthorized and 403 Forbidden?", a: "401 means 'Authentication Failed' (I don't know who you are). 403 means 'Access Denied' (I know who you are, but you aren't allowed to do this).", e: "401 is like trying to enter a building without an ID badge. 403 is having an ID badge (Employee) but trying to enter the CEO's office. You are authenticated, but not authorized.", t: "HTTP Status", c: "Intermediate" },
            { id: 18, q: "What does HTTP Status Code 404 mean?", a: "Status 404 means 'Not Found'. The server cannot find the requested resource.", e: "This usually happens if you make a typo in the URL (e.g., /users/999 where user 999 doesn't exist). It's the digital equivalent of 'This number is no longer in service.'", t: "HTTP Status", c: "Beginner" },
            { id: 19, q: "What does HTTP Status Code 405 mean?", a: "Status 405 means 'Method Not Allowed'. The endpoint exists, but the HTTP method you used (like GET or POST) is not supported.", e: "It's like trying to push a 'Pull' door. The door (endpoint) is there, but you are performing the wrong action (method) on it.", t: "HTTP Status", c: "Intermediate" },
            { id: 20, q: "What does HTTP Status Code 500 mean?", a: "Status 500 means 'Internal Server Error'. A generic error message indicating the server crashed or encountered an unexpected condition.", e: "This is a catch-all for 'Something broke on the backend'. It could be a bug in the code, a database failure, or a configuration issue.", t: "HTTP Status", c: "Beginner" },
            { id: 21, q: "What does HTTP Status Code 502 mean?", a: "Status 502 means 'Bad Gateway'. It means one server received an invalid response from another upstream server.", e: "Imagine a chain of command. You ask the Manager (Gateway), who asks the Worker (Upstream Server). If the Worker talks nonsense, the Manager tells you 'Bad Gateway'. It usually means a connection issue between servers.", t: "HTTP Status", c: "Intermediate" },
            { id: 22, q: "What does HTTP Status Code 503 mean?", a: "Status 503 means 'Service Unavailable'. The server is currently unable to handle the request due to temporary overloading or maintenance.", e: "This is the 'Out to Lunch' or 'Under Construction' sign. The server is fine, it's just too busy or paused right now. Try again later.", t: "HTTP Status", c: "Beginner" },
            { id: 23, q: "What is the difference between 301 and 302 Redirects?", a: "301 is a 'Permanent Redirect' (The page has moved forever; update your bookmarks). 302 is a 'Temporary Redirect' (The page is moved for now, but use the old URL next time).", e: "301 is like moving houses: you fill out a form at the post office to forward mail forever. 302 is like forwarding mail while you are on vacation; you'll be back at the original address soon.", t: "HTTP Status", c: "Intermediate" },
            { id: 24, q: "What does HTTP Status Code 429 mean?", a: "Status 429 means 'Too Many Requests'. You have sent too many requests in a given amount of time.", e: "This is Rate Limiting in action. It prevents spamming. It's like a bouncer telling you to slow down because you're trying to enter the club too fast.", t: "HTTP Status", c: "Intermediate" },
            { id: 25, q: "What is a 504 Gateway Timeout?", a: "Status 504 means the server acting as a gateway did not receive a timely response from an upstream server.", e: "You ask the Manager (Gateway) for a report. The Manager asks the Worker. The Worker takes too long (goes to sleep). The Manager eventually gives up and tells you 'Timeout'.", t: "HTTP Status", c: "Intermediate" },

            // PART 3: POSTMAN MECHANICS (26-40)
            { id: 26, q: "What is a Postman Collection?", a: "A Collection is a folder that groups related API requests together for better organization and execution.", e: "Think of a Collection like a music playlist. Instead of playing individual songs (requests) one by one, you group them together so you can play (run) them all in a specific order.", t: "Postman", c: "Beginner" },
            { id: 27, q: "How does Variable Scope work in Postman?", a: "Postman resolves variables in a specific order: Global (broadest) > Collection > Environment > Data > Local (narrowest).", e: "If you have a variable named 'url' in Global scope and also in Local scope, the Local one wins. It's like having a Global rule 'Lunch is at 12', but a specific local rule 'Today lunch is at 1'. The specific rule overrides the general one.", t: "Postman", c: "Intermediate" },
            { id: 28, q: "What is the difference between Pre-request Scripts and Tests in Postman?", a: "Pre-request Scripts run *before* the request is sent (used for setting up data/tokens). Tests run *after* the response is received (used for validating the result).", e: "Pre-request is like putting on your shoes before running. Tests are checking your pulse after the run to see if you met your goal.", t: "Postman", c: "Beginner" },
            { id: 29, q: "What are Dynamic Variables in Postman?", a: "Dynamic variables are special placeholders like {{$guid}}, {{$timestamp}}, or {{$randomInt}} that Postman replaces with generated values when the request is sent.", e: "They are useful for generating fake data. Instead of hardcoding 'User1', you use {{$randomUserName}} to send a different name every time you test.", t: "Postman", c: "Beginner" },
            { id: 30, q: "What is an Environment in Postman?", a: "An Environment is a set of variables that allows you to switch contexts (like Dev, QA, Production) without changing your request code.", e: "Instead of hardcoding 'http://localhost:3000', you use '{{base_url}}'. Then you can switch the Environment dropdown from 'Local' to 'Production', and Postman automatically swaps the URL.", t: "Postman", c: "Beginner" },
            { id: 31, q: "What is the Collection Runner?", a: "The Collection Runner is a tool in Postman that executes all requests in a collection sequentially.", e: "It allows you to automate testing. Instead of clicking 'Send' on 50 requests manually, the Runner does it for you in one click and gives you a pass/fail report.", t: "Postman", c: "Intermediate" },
            { id: 32, q: "What is Data-Driven Testing in Postman?", a: "Data-Driven Testing involves running a collection multiple times, each time using different data inputs from an external file (CSV or JSON).", e: "Imagine testing a Login API. Instead of manually testing 10 users, you upload a CSV file with 100 usernames/passwords. Postman loops through the file, running the login test for each row.", t: "Postman", c: "Intermediate" },
            { id: 33, q: "What is the Postman Console used for?", a: "The Postman Console is a debugging tool that shows the exact raw HTTP request and response data, including headers, certificates, and errors.", e: "If your script fails silently, open the Console (Ctrl+Alt+C). It's like looking under the hood of the car to see exactly which wire is disconnected.", t: "Postman", c: "Beginner" },
            { id: 34, q: "How do you extract a value from a JSON response in Postman?", a: "You use JavaScript: `var jsonData = pm.response.json(); var value = jsonData.field_name;`", e: "This converts the raw text response into a JavaScript object so you can pick out specific pieces of data, like an ID or Token, to use in the next request.", t: "Scripting", c: "Intermediate" },
            { id: 35, q: "What is the 'pm' object in Postman?", a: "The `pm` object is the global object in the Postman Sandbox that gives you access to the request, response, environment variables, and testing library.", e: "It is your toolkit. If you want to touch the request, read the response, or assert a test, you always start with `pm.` (e.g., `pm.response`, `pm.environment`).", t: "Scripting", c: "Intermediate" },
            { id: 36, q: "How do you assert a Status Code 200 in Postman?", a: "You write a test script: `pm.test('Status is 200', function() { pm.response.to.have.status(200); });`", e: "This defines a test case named 'Status is 200'. If the API returns 200, the test passes (Green). If it returns 404 or 500, the test fails (Red).", t: "Scripting", c: "Beginner" },
            { id: 37, q: "What is a Mock Server in Postman?", a: "A Mock Server simulates the behavior of a real API by returning predefined responses to requests, even if the real backend doesn't exist yet.", e: "It allows frontend developers to work on their app immediately by hitting the 'Mock' API, instead of waiting for the backend developers to finish building the real API.", t: "Postman", c: "Intermediate" },
            { id: 38, q: "What is a Postman Monitor?", a: "A Monitor is a scheduled task that runs your collections in the Postman Cloud at set intervals (e.g., every hour) to check for performance or downtime.", e: "It's like a security guard doing rounds. It checks your API every hour to ensure it's still online and working correctly, sending you an email if it fails.", t: "Postman", c: "Intermediate" },
            { id: 39, q: "How do you handle Authorization in Postman?", a: "You use the 'Authorization' tab in the request builder to select types like 'Bearer Token', 'Basic Auth', or 'OAuth 2.0'. Postman handles the header formatting for you.", e: "Instead of manually calculating complex signature headers, you just paste your API Key or Password into the formatted fields, and Postman does the heavy lifting.", t: "Security", c: "Beginner" },
            { id: 40, q: "What is the Postman Interceptor?", a: "Postman Interceptor is a browser extension that captures network requests from your Chrome browser and syncs them directly to the Postman app.", e: "It's useful for debugging. You browse a website normally, and Interceptor records every API call the website makes, so you can inspect or replay them in Postman.", t: "Postman", c: "Intermediate" },

            // PART 4: SCRIPTING & AUTOMATION (41-50)
            { id: 41, q: "How do you chain requests in Postman?", a: "You extract data from the response of Request A (e.g., a User ID) and save it to an Environment Variable. Then, Request B references that variable (e.g., /users/{{user_id}}).", e: "This connects steps. Step 1: Create User (Server returns ID 5). Script saves 5. Step 2: Get User {{id}}. Postman automatically calls Get User 5.", t: "Scripting", c: "Intermediate" },
            { id: 42, q: "How do you change the execution order of requests?", a: "You use the function `postman.setNextRequest('Request Name')` inside your scripts to tell the Runner which request to jump to next.", e: "Normally, the Runner goes 1, 2, 3. With this, you can create logic: 'If Login fails, jump to End. If Login works, jump to Dashboard'. It allows for conditional workflows.", t: "Scripting", c: "Advanced" },
            { id: 43, q: "What is Newman?", a: "Newman is a command-line tool that allows you to run Postman Collections directly from the terminal/command prompt.", e: "Postman App is for humans (GUI). Newman is for robots (CLI). You use Newman to run your tests automatically in CI/CD pipelines (like Jenkins or GitHub Actions).", t: "Automation", c: "Intermediate" },
            { id: 44, q: "How do you validate a JSON Schema in Postman?", a: "You define the expected schema structure and use `pm.response.to.have.jsonSchema(schema)` which relies on the Ajv library.", e: "It checks the shape of the data, not just the value. It ensures 'age' is always a number and 'email' is always a string, preventing data type errors.", t: "Scripting", c: "Advanced" },
            { id: 45, q: "Which external libraries are available in the Postman Sandbox?", a: "Postman comes pre-loaded with libraries like Lodash (utility), Cheerio (HTML parsing), Moment.js (Date handling), and CryptoJS (Encryption).", e: "You don't need to install them. You can just `require('moment')` in your script to easily format dates or time without writing complex raw code.", t: "Scripting", c: "Advanced" },
            { id: 46, q: "How do you test File Uploads in Postman?", a: "In the Body tab, select 'form-data'. Enter a key name, hover over the value field, select 'File' from the dropdown, and upload your file.", e: "This mimics an HTML form submission where a user uploads an image or document. Postman handles the multipart/form-data encoding.", t: "Postman", c: "Intermediate" },
            { id: 47, q: "How do you generate a random number in a script?", a: "You can use standard JavaScript: `Math.floor(Math.random() * 100)` or use Postman's built-in `{{$randomInt}}` variable.", e: "This is useful for generating unique IDs or prices during testing so you don't create duplicate records.", t: "Scripting", c: "Intermediate" },
            { id: 48, q: "How do you debug tests running in Newman?", a: "You can use the `--reporters cli` flag to see output, and insert `console.log()` in your Postman scripts to print variable values to the terminal during the run.", e: "Since Newman has no visual interface, `console.log` is your best friend to trace what is happening inside the loop.", t: "Automation", c: "Advanced" },
            { id: 49, q: "How do you access response headers in a script?", a: "You use `pm.response.headers.get('Header-Name')` to retrieve the value of a specific header.", e: "You might check the 'Content-Type' header to ensure the server is returning JSON, or check 'Set-Cookie' to verify authentication cookies are being sent.", t: "Scripting", c: "Intermediate" },
            { id: 50, q: "How do you modify the request body before sending it?", a: "In the Pre-request Script, you can access `pm.request.body`, parse it, change a value, and save it back.", e: "This is useful for adding a timestamp or a calculated signature to the body payload dynamically right before the request flies out.", t: "Scripting", c: "Advanced" },

            // PART 5: ADVANCED SCENARIOS (51-65)
            { id: 51, q: "How do you test an API without documentation?", a: "You use Reverse Engineering. Inspect the Network tab in your browser while using the application to see what API calls are being made, then replicate them in Postman.", e: "It's like figuring out a recipe by tasting the food. You watch what the browser does, copy the ingredients (payloads/headers), and try to cook it yourself in Postman.", t: "Strategy", c: "Advanced" },
            { id: 52, q: "What is Negative Testing?", a: "Negative Testing involves intentionally sending invalid, missing, or malformed data to the API to ensure it handles errors gracefully and doesn't crash.", e: "Positive testing is checking if the lock opens with the right key. Negative testing is jamming a stick in the lock to make sure the door doesn't fall off its hinges.", t: "Strategy", c: "Intermediate" },
            { id: 53, q: "What is the difference between Authentication (AuthN) and Authorization (AuthZ)?", a: "Authentication is verifying *who* you are (Login). Authorization is verifying *what permissions* you have (Access Rights).", e: "AuthN is showing your passport at the airport (Confirming Identity). AuthZ is showing your boarding pass (Confirming you are allowed on this specific flight).", t: "Security", c: "Intermediate" },
            { id: 54, q: "What is OAuth 2.0?", a: "OAuth 2.0 is a protocol for authorization. It allows a user to grant a third-party application access to their resources without sharing their password.", e: "It's like using a valet key for your car. You give the valet a special key that only starts the car (limited access) but doesn't open the trunk or glovebox, and you never give them your master key (password).", t: "Security", c: "Advanced" },
            { id: 55, q: "What is Basic Authentication?", a: "Basic Auth is a simple method where the username and password are joined by a colon and encoded in Base64, sent in the Header.", e: "It's the simplest form of ID, but it's not very secure unless used over HTTPS because Base64 is easily decoded by anyone who intercepts it.", t: "Security", c: "Intermediate" },
            { id: 56, q: "What is a Bearer Token?", a: "A Bearer Token is a cryptic string generated by the server. Whoever 'bears' (holds) this token is granted access.", e: "It's like a movie ticket. The usher doesn't check your ID; they just check if you hold a valid ticket. If you drop it and someone else picks it up, they can use it.", t: "Security", c: "Intermediate" },
            { id: 57, q: "What is API Rate Limiting?", a: "Rate Limiting is a strategy used by APIs to restrict the number of requests a client can make within a certain time frame.", e: "It protects the server from being overwhelmed. It's like a limit of 'one candy per child per hour' to prevent the bowl from emptying instantly.", t: "Architecture", c: "Intermediate" },
            { id: 58, q: "How do you test Rate Limits?", a: "You deliberately send requests faster than the allowed limit (e.g., using a loop in Collection Runner) and verify that the server returns HTTP 429.", e: "You are stress-testing the bouncer. You try to rush in 100 times to make sure he stops you after the 10th time as per the rules.", t: "Strategy", c: "Advanced" },
            { id: 59, q: "What is Throttling?", a: "Throttling is the process of slowing down the processing of requests rather than just blocking them, often to manage server load.", e: "Rate limiting blocks you (Stop). Throttling slows you down (Yield). It puts you in a queue to smooth out traffic spikes.", t: "Architecture", c: "Intermediate" },
            { id: 60, q: "What are the key differences between SOAP 1.1 and 1.2?", a: "SOAP 1.2 allows the use of different transport protocols (not just HTTP), allows the request to be a GET method (for efficiency), and has clearer error definitions.", e: "SOAP 1.2 is just a modernized version. It's like upgrading from Windows 10 to 11; the core is similar, but it handles some things more efficiently.", t: "Concepts", c: "Advanced" },
            { id: 61, q: "How do you visualize data in Postman?", a: "You use `pm.visualizer.set(template, data)` in the Tests tab. You can write HTML and CSS to render the JSON response as a table, chart, or image.", e: "Instead of staring at raw JSON text, you can turn a list of user coordinates into a visual map or a list of sales figures into a bar chart directly inside Postman.", t: "Postman", c: "Advanced" },
            { id: 62, q: "What is a Workspace in Postman?", a: "A Workspace is a collaborative environment where teams can share collections, environments, and APIs.", e: "It's like a shared Google Drive folder. Personal workspaces are for your private drafts; Team workspaces are for the final code everyone needs to access.", t: "Postman", c: "Beginner" },
            { id: 63, q: "Can you save a response body to a file in Postman?", a: "Not directly via the Postman App due to browser security sandboxing. However, you can do this using Newman or a local server script.", e: "Browsers don't let websites write files to your hard drive arbitrarily for security reasons. Postman (Electron app) has similar restrictions in scripts.", t: "Automation", c: "Advanced" },
            { id: 64, q: "How do you use `pm.expect` assertions?", a: "`pm.expect` uses the Chai assertion library syntax. Example: `pm.expect(pm.response.json().age).to.be.above(18);`", e: "It reads like English. 'I expect the age to be above 18'. It allows for very readable and expressive test cases.", t: "Scripting", c: "Intermediate" },
            { id: 65, q: "What is GraphQL?", a: "GraphQL is a query language for APIs that allows clients to request exactly the data they need, and nothing more.", e: "In REST, you order a 'Burger Meal' and get fries even if you don't want them. In GraphQL, you explicitly say 'I want a Burger and a Coke', and you get exactly that—no fries, no waste.", t: "Architecture", c: "Advanced" },

            // PART 6: EXPERT & ARCHITECTURE (66-100)
            { id: 66, q: "How do you test GraphQL in Postman?", a: "Postman has native support for GraphQL. You select 'GraphQL' as the body type, and it gives you a split pane to write your Query and your GraphQL Variables.", e: "It provides autocomplete for the schema, making it much easier than typing the raw JSON query string manually.", t: "Postman", c: "Advanced" },
            { id: 67, q: "What is JSONP and why is it used?", a: "JSONP (JSON with Padding) is an older technique used to bypass CORS restrictions by requesting data via a `<script>` tag instead of XHR.", e: "It's a historical workaround (hack) from before CORS was standardized. It wraps the JSON data in a JavaScript function call so the browser executes it.", t: "Architecture", c: "Advanced" },
            { id: 68, q: "What is CORS (Cross-Origin Resource Sharing)?", a: "CORS is a browser security mechanism that restricts web pages from making requests to a different domain than the one that served the web page.", e: "If your site is on `mysite.com`, the browser stops it from secretly talking to `bank.com` unless `bank.com` explicitly says 'It's okay, I trust mysite.com'.", t: "Security", c: "Advanced" },
            { id: 69, q: "What is a Webhook?", a: "A Webhook is a 'Reverse API'. Instead of the client polling the server for data, the server sends data to the client immediately when an event occurs.", e: "Polling is asking 'Do you have mail?' every minute. A Webhook is the mailman ringing your doorbell when mail actually arrives. It's far more efficient.", t: "Architecture", c: "Advanced" },
            { id: 70, q: "What is the difference between HTTP Port 80 and HTTPS Port 443?", a: "Port 80 is the default channel for unencrypted web traffic (HTTP). Port 443 is the default for encrypted, secure traffic (HTTPS).", e: "Think of them as two different doors into the server. Door 80 is open and public. Door 443 has a security guard checking IDs (SSL Certificates).", t: "Concepts", c: "Beginner" },
            { id: 71, q: "What causes a 504 Gateway Timeout?", a: "It happens when a server acting as a gateway attempts to send a request to a downstream server but does not receive a response in time.", e: "It usually means the database is running a very slow query, or the backend service has crashed/hung, causing the load balancer to give up waiting.", t: "HTTP Status", c: "Intermediate" },
            { id: 72, q: "What is the Content-Type header?", a: "The Content-Type header tells the receiver what type of data is being sent in the body (e.g., `application/json`, `text/html`).", e: "It's like a label on a package saying 'Fragile: Glass' or 'Books'. It helps the receiver know how to open and interpret the contents.", t: "HTTP", c: "Beginner" },
            { id: 73, q: "What is the Accept header?", a: "The Accept header is sent by the client to tell the server what format of data it wants to receive in the response.", e: "It's the client saying, 'Please reply to me in French (JSON)'. If the server only speaks Spanish (XML), it might return a 406 Not Acceptable error.", t: "HTTP", c: "Intermediate" },
            { id: 74, q: "How do you integrate Postman with Jenkins?", a: "You install Node.js and Newman on the Jenkins server. Then, you configure a build step in Jenkins to run the command `newman run collection.json`.", e: "This ensures that every time code is committed, Jenkins runs your API tests automatically. If Newman reports a failure, the build stops.", t: "Automation", c: "Expert" },
            { id: 75, q: "How do you add a delay (sleep) in a Postman script?", a: "You can use `setTimeout()` within a script to delay execution, but usually, you rely on `setTimeout` in the collection runner or a simple loop.", e: "JavaScript is asynchronous, so a strict 'sleep' is hard. Often used when you need to wait for a database update to propagate before testing it.", t: "Scripting", c: "Intermediate" },
            { id: 76, q: "What is gRPC?", a: "gRPC is a high-performance framework developed by Google that uses HTTP/2 and Protocol Buffers (binary data) for communication, instead of JSON/text.", e: "It is much faster and lighter than REST. It's like talking in compressed shorthand code over a dedicated high-speed line, whereas REST is talking in full sentences over a standard phone line.", t: "Architecture", c: "Expert" },
            { id: 77, q: "How do you handle 'Flaky Tests' in API automation?", a: "You improve test stability by adding retries, ensuring data isolation (creating fresh data for every test), and avoiding dependencies on shared environments.", e: "A flaky test passes sometimes and fails others. It's usually because the test relied on data that someone else deleted. The fix is to make the test create its own data.", t: "Strategy", c: "Expert" },
            { id: 78, q: "What is the difference between `pm.test` and `pm.expect`?", a: "`pm.test` creates a named entry in the Test Results view. `pm.expect` performs the actual logical check inside that test.", e: "`pm.test` is the container (The Report Card Item). `pm.expect` is the logic (The Grading Criteria).", t: "Scripting", c: "Intermediate" },
            { id: 79, q: "How do you parse HTML responses in Postman?", a: "You load the Cheerio library: `const $ = cheerio.load(pm.response.text());` and then use jQuery-like syntax to find elements.", e: "This is useful if you are testing a web page endpoint and need to verify that a specific <div> or <title> exists in the HTML.", t: "Scripting", c: "Expert" },
            { id: 80, q: "What is the difference between a Mock and a Stub?", a: "A Stub is a minimal implementation that returns hardcoded data. A Mock is smarter; it verifies that a specific call was made with specific parameters.", e: "A Stub acts as a placeholder. A Mock acts as a spy that records what happened.", t: "Strategy", c: "Expert" },
            { id: 81, q: "How do you validate Date and Time formats?", a: "You use the Moment.js library inside Postman to parse the date string and check if it is valid according to a specific format like ISO 8601.", e: "Dates are tricky. Simple string matching isn't enough. Moment.js ensures '2023-02-30' fails (because Feb 30 doesn't exist), whereas regex might miss that.", t: "Scripting", c: "Intermediate" },
            { id: 82, q: "Why use Status 307/308 instead of 302/301?", a: "307 and 308 forbid changing the HTTP method when redirecting. 302 often incorrectly changes a POST request to a GET request on the new URL.", e: "If you POST a form and get a 302, the browser might GET the next page (losing your form data). 307 guarantees the browser retries the POST with the data intact.", t: "HTTP Status", c: "Expert" },
            { id: 83, q: "How do you test for SQL Injection via API?", a: "You send malicious SQL snippets (like `' OR 1=1 --`) in input fields or parameters and check if the server returns a database error or exposes data.", e: "You are trying to trick the database into revealing all records. If the API isn't sanitizing inputs, it might execute your injected code.", t: "Security", c: "Expert" },
            { id: 84, q: "What is HATEOAS?", a: "HATEOAS (Hypermedia As The Engine Of Application State) is a constraint of REST where the API returns links to other related resources, guiding the client on what to do next.", e: "It's like a website menu. When you visit a page, the API doesn't just give data; it gives you links (Next Page, Delete, Edit) so the client doesn't need to hardcode URLs.", t: "Architecture", c: "Expert" },
            { id: 85, q: "How do you share variables between different Collections?", a: "You use Global Variables. Variables defined in the Global scope are accessible by all collections in your workspace.", e: "If you have a 'Session Token' that needs to be used by your 'User Collection' AND your 'Product Collection', put it in Globals.", t: "Postman", c: "Advanced" },
            { id: 86, q: "What is the format of a Basic Auth header?", a: "It contains the string `Basic ` followed by the Base64-encoded string of `username:password`.", e: "Example: `Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=`. It's easy to construct manually if needed.", t: "Security", c: "Advanced" },
            { id: 87, q: "Why monitor API performance trends over time?", a: "A single slow request might be a fluke, but a trend shows degradation. Monitoring helps identify memory leaks or growing database latency.", e: "It's like tracking your weight. One heavy day is fine, but if the number goes up every day for a month, you have a problem.", t: "Strategy", c: "Expert" },
            { id: 88, q: "What is 'Contract-First' development?", a: "It means designing the API specification (like Swagger/OpenAPI) *before* writing any code. Frontend and Backend teams agree on the 'Contract' first.", e: "It's like an architect drawing blueprints before the builders start laying bricks. It prevents the 'Hey, I thought the door was supposed to be here' arguments later.", t: "Strategy", c: "Expert" },
            { id: 89, q: "How do you validate that an array is sorted in a response?", a: "You write a loop in the Test script that compares each element to the one before it to ensure it is greater/lesser than the previous one.", e: "Postman doesn't have a 'isSorted' assertion built-in, so you have to write a little JavaScript logic to walk through the list and check the order.", t: "Scripting", c: "Expert" },
            { id: 90, q: "When should you use `.text()` vs `.json()` on the response?", a: "Use `.json()` when the response is structured data. Use `.text()` when the response is HTML, XML, or plain text.", e: "If you try to `.json()` an HTML error page, the script will crash. Always check the Content-Type header first.", t: "Scripting", c: "Intermediate" },
            { id: 91, q: "How do you verify a security header is MISSING?", a: "You use `pm.expect(pm.response.headers.has('X-Powered-By')).to.be.false;`.", e: "Security best practice is to HIDE server details. You want to make sure the server is NOT announcing 'I am running PHP 5.6' to hackers.", t: "Security", c: "Advanced" },
            { id: 92, q: "What is API Gateway Throttling vs Server Throttling?", a: "Gateway throttling protects the entire infrastructure at the entry point. Server throttling protects a specific microservice instance.", e: "Gateway is the club bouncer (Overall limit). Server throttling is the bartender saying 'I'm too busy, wait a minute' (Local limit).", t: "Architecture", c: "Expert" },
            { id: 93, q: "How do you verify a file download in automation?", a: "You cannot visually 'open' the file. Instead, you check the `Content-Type` header (e.g., application/pdf) and verify the `Content-Length` is greater than 0.", e: "In automation, we trust the metadata. If the server says 'Here is a PDF' and sends 5MB of data, we assume the download worked.", t: "Automation", c: "Expert" },
            { id: 94, q: "What is the difference between 200 OK and 202 Accepted?", a: "200 means 'Done'. 202 means 'Received, but processing is not finished'.", e: "200 is 'Here is your Pizza'. 202 is 'Order received, we are baking it now, check back later'. Useful for long-running jobs.", t: "HTTP Status", c: "Advanced" },
            { id: 95, q: "Why use environment files with Newman?", a: "They allow you to run the same test collection against different environments (Dev, Stage, Prod) by simply passing a different JSON config file flag (`-e`).", e: "It keeps your secrets out of the code. You can have a `dev.json` with fake passwords and a `prod.json` with real ones (kept secure), and just swap the file at runtime.", t: "Automation", c: "Advanced" },
            { id: 96, q: "How do you test for UTF-8/Special Character handling?", a: "Send payloads containing Emojis, Chinese characters, or symbols to ensure the database doesn't turn them into `????`.", e: "This tests encoding. If your API only supports ASCII, a user named 'René' might break your system.", t: "Strategy", c: "Advanced" },
            { id: 97, q: "What is the 'Happy Path'?", a: "The Happy Path is the default, positive scenario where everything works as intended with no errors.", e: "It's the first test you write. 'User logs in with correct password'. If this fails, there is no point testing anything else.", t: "Strategy", c: "Beginner" },
            { id: 98, q: "How do you determine if latency is a Network issue or a Backend issue?", a: "Compare 'Response Time' (Total) vs 'Connect Time' (Network). If Connect is high, it's the network. If Connect is low but Response is high, the server is slow.", e: "Postman breaks these timings down. It helps you decide whether to blame the Wifi or the Database developer.", t: "Performance", c: "Expert" },
            { id: 99, q: "What is Chaos Engineering in APIs?", a: "It involves intentionally introducing failures (delays, errors) into the system to verify that the API recovers gracefully.", e: "It's fire drill training. You randomly turn off a database server to see if the API correctly switches to the backup without the user noticing.", t: "Strategy", c: "Expert" },
            { id: 100, q: "What is BOLA (Broken Object Level Authorization)?", a: "BOLA is a security vulnerability where an attacker can access data objects belonging to another user by simply changing an ID in the URL.", e: "User A (ID: 100) changes the URL from `/orders/100` to `/orders/101` and sees User B's order. It is the #1 API security threat.", t: "Security", c: "Expert" }
        ];

        // --- GEMINI API HELPER ---
        const callGemini = async (prompt, userKey) => {
            const apiKey = userKey || "AIzaSyD0NBzYolo5QCdfbY1P8jnaOCo_14WpKLw";
            
            if (!apiKey) {
                throw new Error("API_KEY_MISSING");
            }

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const maxRetries = 3;
            const delays = [1000, 2000, 4000];

            for (let i = 0; i <= maxRetries; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }]
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || `API Error: ${response.status}`);
                    }

                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response generated.";

                } catch (err) {
                    if (i === maxRetries) throw err;
                    await new Promise(resolve => setTimeout(resolve, delays[i]));
                }
            }
        };

        // --- COMPONENTS ---

        const Badge = ({ children, color }) => {
            // Updated for dark mode compatibility with readable contrast
            const colors = {
                blue: "bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-200",
                green: "bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-200",
                yellow: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-200",
                red: "bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-200",
                purple: "bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-200",
                gray: "bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"
            };
            return (
                <span className={`px-2 py-0.5 rounded text-xs font-medium border border-transparent dark:border-white/10 ${colors[color] || colors.gray}`}>
                    {children}
                </span>
            );
        };

        const SettingsModal = ({ isOpen, onClose, apiKey, setApiKey }) => {
            if (!isOpen) return null;
            const [localKey, setLocalKey] = useState(apiKey);

            const handleSave = () => {
                setApiKey(localKey);
                localStorage.setItem("gemini_api_key", localKey);
                onClose();
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 animate-fade-in backdrop-blur-sm">
                    <div className="bg-white dark:bg-slate-850 rounded-xl shadow-2xl w-full max-w-md p-6 border border-gray-200 dark:border-slate-700">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-xl font-bold text-gray-800 dark:text-white">Settings</h2>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                <IconClose className="w-6 h-6" />
                            </button>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Gemini API Key</label>
                            <input 
                                type="password" 
                                value={localKey}
                                onChange={(e) => setLocalKey(e.target.value)}
                                placeholder="Enter your API Key..."
                                className="w-full px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 dark:placeholder-gray-500"
                            />
                            <p className="text-xs text-gray-500 dark:text-gray-400 mt-2">
                                Your key is stored locally in your browser. Get a key from <a href="https://aistudio.google.com/" target="_blank" className="text-blue-600 dark:text-blue-400 underline">Google AI Studio</a>.
                            </p>
                        </div>
                        <div className="flex justify-end gap-2">
                            <button onClick={onClose} className="px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors">Cancel</button>
                            <button onClick={handleSave} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transition-colors">Save</button>
                        </div>
                    </div>
                </div>
            );
        };

        const AIResponse = ({ content, loading, error, onRetry }) => {
            if (loading) {
                return (
                    <div className="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 animate-pulse flex items-center gap-3 border border-indigo-100 dark:border-indigo-800">
                        <div className="w-5 h-5 border-2 border-indigo-600 dark:border-indigo-400 border-t-transparent rounded-full animate-spin"></div>
                        <span className="text-indigo-800 dark:text-indigo-200 text-sm font-medium">Gemini is thinking...</span>
                    </div>
                );
            }
            if (error) {
                return (
                    <div className="bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-100 dark:border-red-800">
                        <p className="text-red-800 dark:text-red-200 text-sm mb-2">{error}</p>
                        {error === "API_KEY_MISSING" ? (
                            <button onClick={onRetry} className="text-xs bg-red-100 dark:bg-red-800/40 text-red-700 dark:text-red-200 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800/60 font-medium">
                                Open Settings to Add Key
                            </button>
                        ) : (
                            <button onClick={onRetry} className="text-xs bg-red-100 dark:bg-red-800/40 text-red-700 dark:text-red-200 px-2 py-1 rounded hover:bg-red-200 dark:hover:bg-red-800/60 font-medium">
                                Try Again
                            </button>
                        )}
                    </div>
                );
            }
            if (!content) return null;

            return (
                <div className="bg-indigo-50 dark:bg-slate-800 rounded-lg p-4 border border-indigo-100 dark:border-slate-700 animate-fade-in relative group">
                    <div className="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity">
                         <button 
                            onClick={() => navigator.clipboard.writeText(content)}
                            className="p-1 hover:bg-indigo-200 dark:hover:bg-slate-600 rounded text-indigo-600 dark:text-indigo-300"
                            title="Copy"
                        >
                            <IconCopy className="w-4 h-4" />
                        </button>
                    </div>
                    {/* prose-invert automatically handles dark mode text colors in Tailwind prose plugin, but for CDN we style manually or rely on basic text inheritance */}
                    <div className="prose prose-sm max-w-none text-indigo-900 dark:text-indigo-100" dangerouslySetInnerHTML={{ __html: marked.parse(content) }} />
                </div>
            );
        };

        const QuestionCard = ({ item, isOpen, onToggle, apiKey, openSettings }) => {
            const [copied, setCopied] = useState(false);
            const [aiState, setAiState] = useState({ loading: false, content: null, error: null, mode: null });

            // Reset AI state when card closes
            useEffect(() => {
                if (!isOpen) {
                    // Optional: keep cache
                }
            }, [isOpen]);

            const handleCopy = (e) => {
                e.stopPropagation();
                const text = `Q: ${item.q}\nA: ${item.a}\nExplanation: ${item.e}`;
                navigator.clipboard.writeText(text);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const triggerAI = async (mode) => {
                if (aiState.loading) return;
                
                if (aiState.mode === mode && aiState.content) return;

                setAiState({ loading: true, content: null, error: null, mode });

                let prompt = "";
                const context = `Context: The user is preparing for an API Testing interview.
                Question: "${item.q}"
                Answer: "${item.a}"
                Explanation: "${item.e}"`;

                if (mode === 'simplify') {
                    prompt = `${context}\n\nTask: Explain this concept as if I am a 5-year-old (ELI5). Use simple analogies. Keep it under 3 sentences.`;
                } else if (mode === 'code') {
                    prompt = `${context}\n\nTask: Provide a code snippet demonstrating this concept. It could be a Postman test script (JavaScript), a cURL command, or a JSON payload. Wrap code in markdown code blocks. Keep the explanation very brief.`;
                } else if (mode === 'analogy') {
                    prompt = `${context}\n\nTask: Provide a creative, non-technical real-world analogy to explain this concept distinct from the one already provided (if any). Keep it fun and memorable.`;
                }

                try {
                    const result = await callGemini(prompt, apiKey);
                    setAiState({ loading: false, content: result, error: null, mode });
                } catch (err) {
                    if (err.message === "API_KEY_MISSING") {
                        setAiState({ loading: false, content: null, error: "API_KEY_MISSING", mode });
                    } else {
                        setAiState({ loading: false, content: null, error: "Failed to generate. Please try again.", mode });
                    }
                }
            };

            const handleRetry = () => {
                if (aiState.error === "API_KEY_MISSING") {
                    openSettings();
                } else {
                    triggerAI(aiState.mode);
                }
            };

            const complexityColor = {
                "Beginner": "green",
                "Intermediate": "yellow",
                "Advanced": "purple",
                "Expert": "red"
            }[item.c] || "gray";

            return (
                <div 
                    className={`bg-white dark:bg-slate-850 rounded-lg shadow-sm border transition-all duration-200 overflow-hidden ${isOpen ? 'border-blue-200 dark:border-blue-800 ring-1 ring-blue-100 dark:ring-blue-900/30' : 'border-gray-200 dark:border-slate-700 hover:shadow-md dark:hover:border-slate-600'}`}
                >
                    <div className="p-4 cursor-pointer" onClick={onToggle}>
                        <div className="flex justify-between items-start gap-3">
                            <div className="flex-1">
                                <div className="flex flex-wrap gap-2 mb-2">
                                    <Badge color="blue">{item.t}</Badge>
                                    <Badge color={complexityColor}>{item.c}</Badge>
                                    <span className="text-gray-400 dark:text-slate-500 text-xs mt-0.5">#{item.id}</span>
                                </div>
                                <h3 className="text-gray-900 dark:text-gray-100 font-semibold text-lg leading-tight">
                                    {item.q}
                                </h3>
                            </div>
                            <button className="text-gray-400 dark:text-slate-500 hover:text-blue-500 dark:hover:text-blue-400 mt-1">
                                {isOpen ? <IconChevronUp className="w-6 h-6" /> : <IconChevronDown className="w-6 h-6" />}
                            </button>
                        </div>
                    </div>

                    {isOpen && (
                        <div className="px-4 pb-4 animate-fade-in border-t border-gray-100 dark:border-slate-700 bg-gray-50/30 dark:bg-slate-900/50">
                            <div className="pt-3 space-y-4">
                                <div>
                                    <p className="text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1">Answer</p>
                                    <p className="text-gray-800 dark:text-gray-200 font-medium">{item.a}</p>
                                </div>
                                <div>
                                    <p className="text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1">Explanation</p>
                                    <p className="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">{item.e}</p>
                                </div>

                                {/* AI TOOLBAR */}
                                <div className="mt-4 pt-3 border-t border-gray-200 dark:border-slate-700">
                                    <div className="flex items-center gap-2 mb-3">
                                        <IconSparkles className="w-4 h-4 text-indigo-500 dark:text-indigo-400" />
                                        <h4 className="text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wide">Gemini AI Tutor</h4>
                                    </div>
                                    
                                    <div className="flex flex-wrap gap-2 mb-3">
                                        <button 
                                            onClick={(e) => { e.stopPropagation(); triggerAI('simplify'); }}
                                            className={`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${aiState.mode === 'simplify' ? 'bg-indigo-100 dark:bg-indigo-900/60 text-indigo-700 dark:text-indigo-200 ring-1 ring-indigo-200 dark:ring-indigo-700' : 'bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-600 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-indigo-600 dark:hover:text-indigo-300'}`}
                                        >
                                            <IconBulb className="w-3.5 h-3.5" />
                                            Simplify (ELI5) ✨
                                        </button>
                                        <button 
                                            onClick={(e) => { e.stopPropagation(); triggerAI('code'); }}
                                            className={`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${aiState.mode === 'code' ? 'bg-indigo-100 dark:bg-indigo-900/60 text-indigo-700 dark:text-indigo-200 ring-1 ring-indigo-200 dark:ring-indigo-700' : 'bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-600 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-indigo-600 dark:hover:text-indigo-300'}`}
                                        >
                                            <IconCode className="w-3.5 h-3.5" />
                                            Code Example ✨
                                        </button>
                                        <button 
                                            onClick={(e) => { e.stopPropagation(); triggerAI('analogy'); }}
                                            className={`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${aiState.mode === 'analogy' ? 'bg-indigo-100 dark:bg-indigo-900/60 text-indigo-700 dark:text-indigo-200 ring-1 ring-indigo-200 dark:ring-indigo-700' : 'bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-600 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 hover:text-indigo-600 dark:hover:text-indigo-300'}`}
                                        >
                                            <span className="text-sm">💡</span>
                                            Analogy ✨
                                        </button>
                                    </div>

                                    {/* AI Content Area */}
                                    <AIResponse 
                                        content={aiState.content} 
                                        loading={aiState.loading} 
                                        error={aiState.error}
                                        onRetry={handleRetry}
                                    />
                                </div>

                                {/* Copy Button */}
                                <div className="flex justify-end pt-2">
                                    <button 
                                        onClick={handleCopy}
                                        className={`flex items-center gap-1 text-xs px-2 py-1 rounded transition-colors ${copied ? 'text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20' : 'text-gray-400 dark:text-slate-500 hover:bg-gray-200 dark:hover:bg-slate-700 hover:text-gray-600 dark:hover:text-slate-300'}`}
                                    >
                                        {copied ? <IconCheck className="w-3 h-3"/> : <IconCopy className="w-3 h-3"/>}
                                        {copied ? "Copied" : "Copy Q&A"}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [search, setSearch] = useState("");
            const [topicFilter, setTopicFilter] = useState("All");
            const [complexityFilter, setComplexityFilter] = useState("All");
            const [openId, setOpenId] = useState(null);
            const [showSettings, setShowSettings] = useState(false);
            const [apiKey, setApiKey] = useState(() => localStorage.getItem("gemini_api_key") || "");
            
            // Dark Mode State
            const [darkMode, setDarkMode] = useState(() => {
                if (localStorage.getItem("theme") === "dark") return true;
                if (localStorage.getItem("theme") === "light") return false;
                return window.matchMedia("(prefers-color-scheme: dark)").matches;
            });

            // Effect to apply dark mode class
            useEffect(() => {
                if (darkMode) {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                }
            }, [darkMode]);

            const toggleTheme = () => setDarkMode(!darkMode);

            // Get unique values for filters
            const topics = ["All", ...new Set(QUESTIONS_DATA.map(q => q.t))].sort();
            const complexities = ["All", "Beginner", "Intermediate", "Advanced", "Expert"];

            const filteredData = useMemo(() => {
                return QUESTIONS_DATA.filter(item => {
                    const matchesSearch = 
                        item.q.toLowerCase().includes(search.toLowerCase()) || 
                        item.a.toLowerCase().includes(search.toLowerCase());
                    const matchesTopic = topicFilter === "All" || item.t === topicFilter;
                    const matchesComplexity = complexityFilter === "All" || item.c === complexityFilter;
                    return matchesSearch && matchesTopic && matchesComplexity;
                });
            }, [search, topicFilter, complexityFilter]);

            const handleToggle = (id) => {
                setOpenId(openId === id ? null : id);
            };

            return (
                <div className="min-h-screen pb-12 transition-colors duration-300">
                    <SettingsModal 
                        isOpen={showSettings} 
                        onClose={() => setShowSettings(false)} 
                        apiKey={apiKey} 
                        setApiKey={setApiKey} 
                    />

                    {/* Header */}
                    <div className="bg-gradient-to-r from-blue-700 to-indigo-800 dark:from-slate-900 dark:to-slate-900 text-white pt-8 pb-20 px-4 relative transition-colors duration-300">
                         <div className="absolute top-4 right-4 flex items-center gap-3">
                            {/* Theme Toggle */}
                            <button
                                onClick={toggleTheme}
                                className="p-2 bg-white/10 hover:bg-white/20 rounded-full text-yellow-300 hover:text-yellow-200 transition-colors backdrop-blur-sm"
                                title="Toggle Theme"
                            >
                                {darkMode ? <IconSun className="w-5 h-5" /> : <IconMoon className="w-5 h-5" />}
                            </button>

                            {/* Settings Button */}
                            <button 
                                onClick={() => setShowSettings(true)}
                                className="flex items-center gap-2 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition-colors backdrop-blur-sm"
                            >
                                <IconSettings className="w-4 h-4" />
                                <span className="hidden sm:inline">Settings</span>
                            </button>
                        </div>
                        <div className="max-w-4xl mx-auto text-center">
                            <h1 className="text-3xl md:text-4xl font-bold mb-2 flex items-center justify-center gap-3">
                                Dosti Bani Rahe - API & Postman Interview Prep
                            </h1>
                            <p className="text-blue-100 dark:text-slate-400 text-sm md:text-base">Top 100 questions to master API testing. Now with <span className="text-yellow-300 font-semibold">Gemini AI ✨</span>.</p>
                        </div>
                    </div>

                    {/* Main Content Area (Overlapping Header) */}
                    <main className="max-w-4xl mx-auto px-4 -mt-12 relative z-10">
                        
                        {/* Controls Card */}
                        <div className="bg-white dark:bg-slate-850 rounded-xl shadow-lg p-4 md:p-6 mb-6 border border-gray-100 dark:border-slate-700 transition-colors duration-200">
                            <div className="grid grid-cols-1 md:grid-cols-12 gap-4">
                                {/* Search */}
                                <div className="md:col-span-6 relative">
                                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <IconSearch className="h-5 w-5 text-gray-400 dark:text-gray-500" />
                                    </div>
                                    <input
                                        type="text"
                                        placeholder="Search questions or keywords..."
                                        className="block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm transition duration-150 ease-in-out"
                                        value={search}
                                        onChange={(e) => setSearch(e.target.value)}
                                    />
                                </div>
                                
                                {/* Filters - fixed heights to match input */}
                                <div className="md:col-span-3">
                                    <div className="relative">
                                        <select
                                            className="block w-full pl-3 pr-10 py-2.5 text-base border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm rounded-lg appearance-none cursor-pointer"
                                            value={topicFilter}
                                            onChange={(e) => setTopicFilter(e.target.value)}
                                        >
                                            {topics.map(t => <option key={t} value={t}>{t === 'All' ? 'All Topics' : t}</option>)}
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500 dark:text-gray-400">
                                            <IconFilter className="h-4 w-4" />
                                        </div>
                                    </div>
                                </div>

                                <div className="md:col-span-3">
                                    <div className="relative">
                                        <select
                                            className="block w-full pl-3 pr-10 py-2.5 text-base border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm rounded-lg appearance-none cursor-pointer"
                                            value={complexityFilter}
                                            onChange={(e) => setComplexityFilter(e.target.value)}
                                        >
                                            <option value="All">All Levels</option>
                                            {complexities.filter(c => c !== "All").map(c => (
                                                <option key={c} value={c}>{c}</option>
                                            ))}
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500 dark:text-gray-400">
                                            <IconChevronDown className="h-4 w-4" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Stats & List */}
                        <div className="flex justify-between items-center mb-4 text-sm text-gray-500 dark:text-slate-400 px-1">
                            <span>Showing {filteredData.length} questions</span>
                            {filteredData.length === 0 && <span className="text-red-500 dark:text-red-400">No results found.</span>}
                        </div>

                        <div className="space-y-3">
                            {filteredData.map(item => (
                                <QuestionCard 
                                    key={item.id} 
                                    item={item} 
                                    isOpen={openId === item.id}
                                    onToggle={() => handleToggle(item.id)}
                                    apiKey={apiKey}
                                    openSettings={() => setShowSettings(true)}
                                />
                            ))}
                        </div>
                    </main>

                    {/* Footer */}
                    <footer className="text-center text-gray-400 dark:text-slate-600 text-xs py-8 mt-8">
                        <p>Powered by Gemini API • {new Date().getFullYear()}</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
